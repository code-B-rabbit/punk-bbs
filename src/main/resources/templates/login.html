<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="header::head(博客登录)">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bootstrap Blog - B4 Template by Bootstrap Temple</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="../static/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Custom icon font-->
    <link rel="stylesheet" href="../static/css/fontastic.css">
    <!-- Google fonts - Open Sans-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
    <!-- Fancybox-->
    <link rel="stylesheet" href="vendor/@fancyapps/fancybox/jquery.fancybox.min.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="../static/css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="../static/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="favicon.png">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body >
<header th:replace="header::header(7)">
    <!-- Main Navbar-->
    <nav class="navbar navbar-expand-lg">
        <div class="search-area">
            <div class="search-area-inner d-flex align-items-center justify-content-center">
                <div class="close-btn">
                    <svg class="bi bi-reply-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.079 11.9l4.568-3.281a.719.719 0 000-1.238L9.079 4.1A.716.716 0 008 4.719V6c-1.5 0-6 0-7 8 2.5-4.5 7-4 7-4v1.281c0 .56.606.898 1.079.62z"/>
                    </svg>
                </div>
                <div class="row d-flex justify-content-center">
                    <div class="col-md-8">
                        <form action="/blogsearch" method="get">
                            <div class="form-group">
                                <input type="search" name="search" id="search" placeholder="请输入你要寻找的博客文章或文章内容.......">
                                <button type="submit" class="submit">
                                    <svg class="bi bi-search" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z" clip-rule="evenodd"/>
                                        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <!-- Navbar Brand -->
            <div class="navbar-header d-flex align-items-center justify-content-between">
                <!-- Navbar Brand --><a href="index.html" class="navbar-brand">XHB's Blog</a>
                <!-- Toggle Button-->
                <button type="button" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarcollapse" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span></span><span></span><span></span></button>
            </div>
            <!-- Navbar Menu -->
            <div id="navbarcollapse" class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a href="index.html" class="nav-link active ">Home</a>
                    </li>
                    <li class="nav-item"><a href="blog.html" class="nav-link ">Blog</a>
                    </li>
                    <li class="nav-item"><a href="post.html" class="nav-link ">Post</a>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link ">Contact</a>
                    </li>
                </ul>
                <div class="navbar-text"><a href="#" class="search-btn">
                    <svg class="bi bi-search" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z" clip-rule="evenodd"/>
                        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z" clip-rule="evenodd"/>
                    </svg></a></div>
                <ul class="langs navbar-text"><a href="#" class="active">EN</a><span>           </span><a href="#">ES</a></ul>
            </div>
        </div>
    </nav>
</header>
<div class="container">
    <div class="row justify-content-center" style="height: 500px">
        <div class="align-self-center">
            <script th:inline="javascript">
                var msg=[[${message}]];
                if(msg)
                {
                    alert(msg);          //修改回显
                }
            </script>
            <script>
                function init() {
                    $.ajax({
                        //请求方式
                        type : "get",

                        contentType: "application/json;charset=UTF-8",

                        url : "/getCookie",

                        dataType:'json',

                        success : function(result) {
                            $('input.username1').val(result.name);
                            $('input.userPassword1').val(result.password);
                            if(result.name!="")
                            {
                                $("input#rememberMe").attr("checked","true");
                            }
                        },
                        //请求失败，包含具体的错误信息
                        error : function(e){
                            console.log(e.status);
                            console.log(e.responseText);
                        }
                    });
                }
                function getOrderList() {
                    //orderForm即是表单的ID
                    return false;
                }
                function request(data)
                {
                    var defer = $.Deferred();
                    $.ajax({
                        url:"/user/check",
                        method:"post",
                        data:data,
                        dataType: "json",
                        success:function (dataStr) {
                            if(dataStr.message==true){
                                if(confirm("写篇文章???")){
                                    if(dataStr.adm==true){
                                        window.location.href="/admin/articleList";
                                        return;
                                    }else{
                                        window.location.href="/userAdmin/articleList";
                                        return;
                                    }
                                }else{
                                    history.go(-1);
                                    location.reload();
                                }
                            }else{
                                alert("用户名或密码错误");
                            }
                        }
                    });
                    return defer.promise();
                }

                function refresh(){
                    $('img#imgs').trigger("click");
                }

                $(function () {
                    init();           //初始化cookie
                    $('form#login').submit(function () {

                        $.post("/valid",{
                                tryCode:$("#verCode").val()
                            },
                            function(data) {
                                if(data.error)
                                {
                                    alert(data.info);
                                    $('img#imgs').trigger("click");
                                    return false;
                                }else{
                                    var data=$("form#login").serialize();
                                    if(data.name||data.password){
                                        alert("用户名或密码不能为空!");
                                        return false;
                                    }else
                                    {
                                        request(data);
                                        return false;
                                    }
                                }
                            }
                        );
                        return false;
                    })
                })
            </script>
            <div class="card" target="iframe">
                <div class="card-header">用户登录</div>
                <div class="card-body">
                    <span class="font-weight-bold">(部分手机自带浏览器可能会无法正常登录,换成其他浏览器即可)</span>
                    <form method="post" id="login" target="_blank" action="#">
                        <div class="form-group">
                            <input type="name" name="name" class="form-control username1" id="exampleInputEmail1" placeholder="请输入您的用户名">
                        </div>
                        <div class="input-group mb-3">
                            <input type="password" id="exampleInputPassword1" name="password" class="form-control userPassword1" placeholder="请输入密码" aria-label="Recipient's username" aria-describedby="button-addon2"/>
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button" id="button-addon2">显示密码</button>
                            </div>
                        </div>
                        <div class="input-group mb-3">
                            <input type="password" id="verCode"  class="form-control userPassword1" placeholder="请输入验证码" aria-label="Recipient's username" aria-describedby="button-addon2"/>
                            <div class="input-group-append" >
                                <img id="imgs" onclick="this.src='/defaultKaptcha?d=' + new Date()*1" src="/defaultKaptcha"   aria-label="Recipient's username" aria-describedby="button-addon2"/>
                            </div>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input position-static" name="checked" type="checkbox" id="rememberMe"/>
                            30天内记住我
                            没有账户?<a href="/user/register" class="text-success">现在注册</a>
                            <btn onclick="refresh()" class="btn-link float-right">验证码看不清楚?换一张</btn>
                        </div>
                        <br>
                        <button  type="submit" class="btn btn-block btn-info btn-default">登录</button>
                        <iframe id="iframe" name="iframe" style="display:none;"></iframe>
                        <script>
                            $(function () {
                                hide=true;        //全局的是否隐藏的变量
                                $("#button-addon2").click(
                                    function () {
                                        hide=!hide;
                                        if(hide==true)
                                        {
                                            $('#exampleInputPassword1').attr('type','password');
                                            $(this).text("点我显示");
                                        }else
                                        {
                                            $('#exampleInputPassword1').attr('type','text');
                                            $(this).text("点我隐藏");
                                        }
                                    }
                                );
                            })
                        </script>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="main-footer" th:replace="foot::foot">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="logo">
                    <h6 class="text-white">徐浩博的技术小站</h6>
                </div>
                <div class="contact-details">
                    <p>Phone: 15690116825</p>
                    <p>Email: 511928849@qq.com</a></p>
                    <ul class="social-menu">
                        <li class="list-inline-item"><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="fa fa-instagram"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="fa fa-behance"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="fa fa-pinterest"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4">
                <div class="menus d-flex">
                    <ul class="list-unstyled">
                        <li> <a>友链</a></li>
                        <li> <a href="#" th:each="fl:${fls}" th:text="${fl.name}" th:href="${fl.link}">My Account</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4">
            </div>
        </div>
    </div>

</footer>
<script src="../static/js/wordOut.js" th:src="@{/js/wordOut.js}"></script>
<script src="../static/vendor/jquery/jquery.min.js" th:src="@{/vendor/jquery/jquery.min.js}"></script>
<script src="../static/vendor/popper.js/umd/popper.min.js" th:src="@{/vendor/popper.js/umd/popper.min.js}"> </script>
<script src="../static/vendor/bootstrap/js/bootstrap.min.js" th:src="@{/vendor/bootstrap/js/bootstrap.min.js}"></script>
<script src="../static/vendor/jquery.cookie/jquery.cookie.js" th:src="@{/vendor/jquery.cookie/jquery.cookie.js}"> </script>
<script src="../static/vendor/@fancyapps/fancybox/jquery.fancybox.min.js" th:src="@{/vendor/@fancyapps/fancybox/jquery.fancybox.min.js}"></script>
<script src="../static/js/front.js" th:src="@{/js/front.js}"></script>
</body>
</html>